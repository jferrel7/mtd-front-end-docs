<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>MTD Front-End Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name"><a href="/">MTD Front-End Docs</a></h1>
      <h2 class="project-tagline">Instructions, guidelines and coding standards for working with MTD Front-End technology.</h2>
      <a href="https://github.com/jferrel7/mtd-front-end-docs" class="btn">View on GitHub</a>
    </section>
    <section class="main-content">
  <h1 id="mtd-appcache-explainer">MTD AppCache Explainer</h1>

<h2 id="what-is-appcache">What is AppCache?</h2>

<p>HTML5 provides an application caching mechanism that stores resources (images, css,
javascript) on the device of the site being viewed. Developers can use the AppCache interface
to specify which resources should be cached.</p>

<h2 id="what-benefits-can-be-achieved-by-using-appcache">What benefits can be achieved by using AppCache?</h2>

<p><strong>Speed</strong>: cached resources are stored physically on the device, and therefore load faster</p>

<p><strong>Reduced server load</strong>: the browser only downloads resources that have changed from the
server</p>

<p><strong>Offline-ready</strong>: since resources are cached locally, the site can load resources without an
internet connection. Making the MTD sites work fully offline would require more work to account
for content, etc; but getting started down that path now makes sense.</p>

<h2 id="what-do-we-want-to-cache-now">What do we want to cache now?</h2>

<p>We want to cache images, CSS and Javascript files which are needed for the site shell, the
global header and footer.</p>

<p>Caching these resources will greatly improve the perceived load time for each site.</p>

<h2 id="how-does-it-work">How does it work?</h2>

<p>Typically, you would specify a path to the AppCache manifest file from the HTML document.
This approach has one major drawback, it would also cache the HTML document itself. We
don’t want the HTML document cached so we are using an alternative approach.</p>

<p>We use a javascript library named appcache-nanny, instead of having to specify the manifest
file. The script dynamically loads an iframe that includes an HTML file which contains a
reference to our app cache manifest file. This approach allows us to cache the resources we
want to, but not cache our HTML document that has actual real content in it.</p>

<p>Currently, we have created a manifest directory in /wcsstore/[brand] folder. It contains two files,
appcache-loader.html and manifest.appcache.</p>

<p>appcache-loader.html is the file that gets loaded into the iframe by appcache-nanny.js
manifest.appcache contains the list of files we want cached. Note: Your web server will probably
need to be configured so that files with the extension .appcache are served with the mime type
of “text/cache-manifest”.</p>

<h2 id="how-do-we-invalidate-the-cache-when-needed">How do we invalidate the cache when needed?</h2>

<p>The manifest.appcache allows us to invalidate the cache. By simply bumping the version number
inside the file. We currently do this manually, as it typically shouldn’t be invalidated very
frequently.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jferrel7/mtd-front-end-docs">mtd-front-end-docs</a> is maintained by <a href="https://github.com/jferrel7">jferrel7</a>.</span>
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>
    </section>  
  </body>
</html>